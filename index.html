---
layout: default
---

<div class="container">
  <h1>AtomVM Esp32 Firmware Flasher</h1>

  <p class="lead">- Marketing buzz, from a dist future -</p>

  {% assign versions = site.data.versions.versions %} 
  {% assign latest_stable_version = nil %} 
  {% assign latest_prerelease_version = nil %} 
  {% for version in versions %} 
    {% unless latest_stable_version %}
      {% if version.version contains 'alpha' or version.version contains 'beta' or version.version contains 'rc' %}
        {% unless latest_prerelease_version %} 
          {% assign latest_prerelease_version = version %}
        {% endunless %}
        {% continue %}
      {% endif %} 
      {% assign latest_stable_version = version %} 
    {% endunless %} 
  {% endfor %} 
  {% unless latest_stable_version %} 
    {% assign latest_stable_version = versions | first %} 
  {% endunless %} 
  {% assign release_json = latest_stable_version.version | prepend: 'assets/' | append: '/release.json' %}
  {% assign elixir_json = latest_stable_version.version | prepend: 'assets/' | append: '/release-elixir.json' %}

  <section class="latest-release">
    <h2>Latest Stable Release</h2>
    {% assign install_item = latest_stable_version %} 
    {% include install_card.html %}
  </section>

  {% if latest_prerelease_version.published_at >
  latest_stable_version.published_at %}
  <section class="latest-release">
    <h2>Latest Pre-Release</h2>
    {% assign install_item = latest_prerelease_version %}
    {% include install_card.html %}
  </section>
  {% endif %}
  <section class="latest-release">
    <div class="view-all">
      <a href="all_versions" class="button">View all versions</a>
    </div>
    <div class="popup-container">
      <a class="button" id="popupButton">Open Demo</a>
    </div>
  </section>
</div>

<!-- Popup Overlay -->
<div id="popupOverlay" class="popup-overlay">
  <div class="popup-content">
    <span class="close-popup">&times;</span>
    <h2>Demo Content</h2>
    <div class="demo-content">
      <h3>AtomVM Demo</h3>
      <p>This is a sample demo of AtomVM running on ESP32.</p>
      <pre><code>
% Example AtomVM code
-module(blink).
-export([start/0]).

start() ->
    gpio:set_direction(2, output),
    blink_loop().

blink_loop() ->
    gpio:digital_write(2, 1),
    timer:sleep(1000),
    gpio:digital_write(2, 0),
    timer:sleep(1000),
    blink_loop().
      </code></pre>
    </div>
  </div>
</div>

<script
  type="module"
  src="https://unpkg.com/esp-web-tools@10/dist/web/install-button.js?module"
></script>

<link rel="stylesheet" href="assets/css/styles.css" />
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const popup = document.getElementById('popupOverlay');
    const btn = document.getElementById('popupButton');
    const closeBtn = document.querySelector('.close-popup');

    btn.onclick = function() {
      popup.style.display = "block";
    }

    closeBtn.onclick = function() {
      popup.style.display = "none";
    }

    window.onclick = function(event) {
      if (event.target == popup) {
        popup.style.display = "none";
      }
    }
  });
</script>
